<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year of study</title>
    <style>
        /*000022 001242 0094C6 ; oxford_blue penn_blue blue*/
        body{
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            background-color: #000022;
        }
        #contacts{
            background-color: #040F16;
            padding: 0 10px;
            font-weight: 700;
            color: #fff;
            /*border: #fff solid 1px;*/
        }
        #header-elements{
            padding: 0% 5%;
            /* background-color: yellowgreen; */
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            /*border: #fff solid 1px;*/
            border-bottom: #fff solid 1px;
        }
        #logo-cont{
            color:#fff;
            /*border: #fff solid 1px;*/
            /* color: #001242; */
           
        }
        #personalise-cont{
            display: flex;
            justify-content: space-between;
            width: fit-content;
            padding: 10px;
            /* background-color: blueviolet; */
            /*border: #fff solid 1px;*/
            height: 100%;
            width: 40%;
            align-items: baseline;
        }
        .buttons{
            width: fit-content;
            background-color:#005E7C;
            color: #fff;
            padding: 10px;
            outline: none;
            border: none;
            border-radius: 5%;
        }
        #nav-menu{
            display: block;
            margin:2vh 1vh 0vh 1vh;
            font-size: 16px;
        }
        .nav-menu-btn{
            color:#ffffff9d;
        }
        .nav-menu-btn:hover{
            color:#0094C6;
            text-decoration: underline;
            cursor:pointer;
        }
        .nav-menu-separator{
            color: #fff;       
        }
        #search-bar-cont{
            width: 85%;
            display: flex;
            justify-content: center;
        }
        #search-query{
            padding: 9px 5px;
            width: 70%;
        }
        .page-title{
            color: #fff;
        }

        #main-cont{
            /*border: #fff solid 1px;*/
            /* background-color: brown; */
            margin-top: 6vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: fit-content;
        }
        #page-items{
            display: flex;
            flex-direction: column;
        }
        .page-item{
            background-color: #0094C6;
            padding: 10px 5px 10px 20px;
            margin: 5px 0px;
            width: 100%;
            color: #fff;
        }

        @media screen and (max-width: 600px) {
           #header-elements{
            display: flex;
            flex-direction: column;
            /* justify-content: space-between; */
            /* align-items: baseline; */
            border: none;
           }
           #logo-cont{
            /* border: #fff solid 1px; */
            font-size: 70%;
            width: fit-content;
            margin: auto;
            
           }
           #personalise-cont{
            display: flex;
            /* flex-direction: column; */
            width: 100%;
            padding: 1px;
            /* background-color: blueviolet; */
            /* border: #fff solid 1px; */
            height: 100%;
            /* width: 40%; */
            align-items: center;
            margin: auto;
        }
        #main-cont{
            font-size: 90%;
        }
        }
        .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 10vh;
        color: #0094C6;
        }
        .loading {
        display: inline-block;
        width: 2px;
        height: 2px;
        border-radius: 50%;
        border: 2px solid #0094C6;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        
        }
        @keyframes spin {
        to {
            transform: rotate(360deg);
        }
        }   
            
        

    </style>
</head>
<body>
    <div id="contacts">
        <p>CONTACT US: +250728043519</p>
    </div>
    <div id="header-elements">
        <div id="logo-cont"><h1>IBICUPULI</h1></div>
        <div id="personalise-cont">
            <div id="filter-button-cont">
                <button class="buttons" id="filter-button">Filter</button>
            </div>
            <div id="search-bar-cont">
                <input type="text" id="search-query">
                <button class="buttons" id="search-button">Search</button>
            </div>
        </div>
    </div>
    <div id="main-cont">
        <div id="nav-menu">
            <span class="nav-menu-btn" id="hm-nav-btn">HOME</span>
            <span class="nav-menu-separator">></span>
            <span class="nav-menu-btn" id="dpt-nav-btn">Department</span>
            <span class="nav-menu-separator">></span>
            <span class="nav-menu-btn" id="opt-nav-btn">Option</span>
        </div>
        <div class="page-title-cont">
            <h2 class="page-title">YEAR OF STUDY</h2>
        </div>
        <div class="loading-container">
            <div class="loading"></div>
            <p>Loading...</p>
        </div>
        <div id="page-items">
            <div class="page-item">
                YEAR 1
            </div>
            <div class="page-item">
                YEAR 2
            </div>
            <div class="page-item">
                YEAR 3
            </div>
            <div class="page-item">
                YEAR 4
            </div>
        </div>
    </div>
</body>
<script>
    window.onload = ()=>{
        const itemsCont = document.getElementById('page-items');
        itemsCont.style.display = "none" ;
    }
    const homeBtn = document.getElementById('logo-cont');
    homeBtn.addEventListener('click',()=>{
        window.location.href = '../index.html'
    })

    const homeNav = document.getElementById("hm-nav-btn");
    homeNav.addEventListener('click',()=>{
        window.location.href = "../index.html"
    })
    let departmentNav = document.getElementById("dpt-nav-btn");
    const dName = sessionStorage.getItem('departmentName');
    // splitName(departmentName);
    departmentNav.innerText = dName;
    departmentNav.addEventListener('click',()=>{
        window.location.href = "./options.html"
    });

    let optionNav = document.getElementById("opt-nav-btn");
    const optName = sessionStorage.getItem('optionName');
    // splitName(departmentName);
    optionNav.innerText = optName;
    optionNav.addEventListener('click',()=>{
        window.location.href = "./years.html"
    });



    getYears();
    function getYears(){
        const link = sessionStorage.getItem('optionLink');
        const url = `https://past-papers-api.onrender.com/folders/${link}`
        const options = {
            method:"GET"
        }
        fetch(url,options)
        .then(response=>response.json())
        .then(data=>{
            document.querySelector('.loading-container').style.display = 'none';
            document.getElementById('page-items').style.display = 'block';
            displayYears(data.data);
        })
    }

    function displayYears(data){
        const itemsCont = document.getElementById('page-items');
        itemsCont.innerHTML = "";
        if(data.length===0){
            itemsCont.innerText = "NO YEARS FOUND"
            itemsCont.style.color = '#0094C6'
        }
        data.forEach(yr => {
            const listItem = document.createElement('div');
            listItem.classList.add("page-item");
            listItem.innerText = yr.name;
            console.log(yr.name);
            itemsCont.appendChild(listItem);
            listItem.addEventListener("click",(e)=>{
                e.preventDefault();
                openFolder(yr);
            })
        });
    }

    function openFolder(yr){
        sessionStorage.setItem('yearLink',yr.link);
        sessionStorage.setItem('yearName',yr.name);
        window.location.href = './modules.html'
    }
</script>
</html>